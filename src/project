day_num = 0
import csv

def main():
    #this is the main game loop, yes?
    #so maybe it would start with a function like run_intro.
    #I should put an extra function to run on day 1, basically to play the intro and take care of setting names and stuff
    if day_num == 0:
        player_name, filename, player_dict, birch_dict, marlowe_dict, pixie_dict, stellaluna_dict, elwood_dict, companion_list = initialize()
    run_intro(companion_list, birch_dict, marlowe_dict, pixie_dict, stellaluna_dict, elwood_dict)
    #for the sake of clarity, I think run_intro should only take care of the new day and status report messages.
    #the camp choices can go to another function.
    run_camp()

def initialize():
    #add some fancy stuff here later. Print title and intro story.
    #allow player to pick name
    player_name=input("What is your name?")
    filename=f"{player_name}.csv"
    print(f"Welcome to Cat's Cradle Coven, {player_name}! Are you ready to start on a new adventure?")
    print("But before you start your coven, we need to know what sort of leader you'll be.")
    #notes: this appears sloppy in the terminal. fix this text later.
    print("Some cats excel at the art of the hunt, while others have an excellent intuition for dealing with herbs."
            "Do you disperse enemies through shows of strength, or charm them with a silver tongue?"
            "The possibilities are endless.")
    skill_unpicked=True
    while skill_unpicked==True:
        player_type=input("What skill do you specialize in? Please type the number of your choice - 1.Hunting 2.Gathering 3.Strength 4.Charm")
        if player_type == "1":
            hunt = 5
            herb = 2
            fight = 2
            talk = 2
            skill_unpicked=False
        elif player_type == "2":
            hunt = 2
            herb = 5
            fight = 2
            talk = 2
            skill_unpicked=False
        elif player_type == "3":
            hunt = 2
            herb = 2
            fight = 5
            talk = 2
            skill_unpicked=False
        elif player_type == "4":
            hunt = 2
            herb = 2
            fight = 2
            talk = 5
            skill_unpicked=False
        else:
            print("Sorry, that was not a valid response. Please type 1, 2, 3, or 4.")
            continue
    #create a csv file that will act as a save point using the player's name as a naming convention.
    #if there is already a file, load that instead.
    #Add the player's name and their starter stats, then first companion's name/stats
    with open(filename, 'w', newline='') as file:
        csv_writer=csv.writer(file)
        csv_writer.writerow(["Name", "Hunting", "Gathering", "Strength", "Charm", "Health", "Friendship"])
        csv_writer.writerow([player_name, hunt, herb, fight, talk, "5", "1"])
        csv_writer.writerow(["Birch", "4", "1", "3", "3", "5", "1"])

    #then make a dictionary for player and Birch, for easy access
    player_dict = {
        "Name": player_name,
        "Hunting": hunt,
        "Gathering": herb,
        "Strength": fight,
        "Charm": talk,
        "Health": 5
    }
    birch_dict = {
        "Name": "Birch",
        "Hunting": 4,
        "Gathering": 1,
        "Strength": 3,
        "Charm": 3,
        "Health": 5,
        "Friendship": 1
    }
    #gonna make dicts for the other cats too, for later use
    marlowe_dict = {
        "Name": "Marlowe",
        "Hunting": 6,
        "Gathering": 11,
        "Strength": 6,
        "Charm": 2,
        "Health": 10,
        "Friendship": 1
    }
    pixie_dict = {
        "Name": "Pixie",
        "Hunting": 7,
        "Gathering": 4,
        "Strength": 7,
        "Charm": 19,
        "Health": 15,
        "Friendship": 1
    }
    stellaluna_dict = {
        "Name": "Stella-Luna",
        "Hunting": 6,
        "Gathering": 7,
        "Strength": 27,
        "Charm": 7,
        "Health": 20,
        "Friendship": 1
    }
    elwood_dict = {
        "Name": "Elwood",
        "Hunting": 40,
        "Gathering": 40,
        "Strength": 40,
        "Charm": 40,
        "Health": 30,
        "Friendship": 1
    }

    companion_list = [birch_dict]

    return player_name, filename, player_dict, birch_dict, marlowe_dict, pixie_dict, stellaluna_dict, elwood_dict, companion_list
    
    
    

def run_intro(companion_list, birch_dict, marlowe_dict, pixie_dict, stellaluna_dict, elwood_dict):
    #this runs the status report at the beginning of every day.
    print("It's a new day!")
    print("Status Report:")
    #for each cat in companion_list:
    #if is_injured = True:
    #print("{cat_name} is injured!")
    #else:
    #print("{cat_name} is ready to go!")
    for cat in companion_list:
        cat_name = cat.get("Name")
        if cat.get("Health") <=0:
            print(f"{cat_name} is injured!")
        else:
            print(f"{cat_name} is ready to go!")

def run_camp():
    #this covers the player input. It should ask them if they want to send someone exploring, cast a spell, or talk to their companions.
    has_explored = False
    has_cast_spell = False
    while True:
        print("Do you want to:")
        print("1. Explore   2. Cast a spell   3. Talk to someone   4. End the day")
        choice = input("Type the number of your choice:")
        if choice == 1:
            if has_explored == True:
                print("You've already sent someone out to explore today!")
            else:
                send_exploring()
                has_explored = True
        if choice == 2:
            if has_cast_spell == True:
                print("You've already sent someone out to explore today!")
            else:
                send_exploring()
                has_cast_spell = True

def send_exploring():
    print("Who do you want to send out? The available cats are:")
    for companion in companion_list:
        if is_injured == False:
            print #their name
        else:
            pass
    explore_companion = input("Type the name of the cat you want to send, or type r to return")

if __name__ == "__main__":
    main()