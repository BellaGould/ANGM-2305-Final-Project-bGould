day_num = 0
import csv
import random

def main():
    #this is the main game loop, yes?
    #so maybe it would start with a function like run_intro.
    #I should put an extra function to run on day 1, basically to play the intro and take care of setting names and stuff
    if day_num == 0:
        player_name, filename, player_dict, birch_dict, pixie_dict, stellaluna_dict, elwood_dict, companion_list, inventory_dict = initialize()
    run_intro(companion_list, inventory_dict)
    #for the sake of clarity, I think run_intro should only take care of the new day and status report messages.
    #the camp choices can go to another function.
    run_camp(companion_list, inventory_dict, player_dict)

def initialize():
    #add some fancy stuff here later. Print title and intro story.
    #allow player to pick name
    player_name=input("What is your name? ")
    filename=f"{player_name}.csv"
    print(f"Welcome to Cat's Cradle Coven, {player_name}! Are you ready to start on a new adventure?\n")
    print("But before you start your coven, we need to know what sort of leader you'll be.\n")
    print("As leader, your skills and personality influence everyone in the coven. Your leader type will provide a stat boost to every cat you recruit.\n")
    print("Some cats excel at the art of the hunt, while others have an excellent intuition for dealing with herbs. "
            "Do you disperse enemies through shows of strength, or charm them with a silver tongue? "
            "The possibilities are endless.\n")
    skill_unpicked=True
    while skill_unpicked==True:
        player_type=input("What skill do you specialize in? Please type the number of your choice - 1.Hunting | 2.Gathering | 3.Strength | 4.Charm \n")
        if player_type == "1":
            hunt = 5
            herb = 1
            fight = 1
            talk = 1
            skill_unpicked=False
        elif player_type == "2":
            hunt = 1
            herb = 5
            fight = 1
            talk = 1
            skill_unpicked=False
        elif player_type == "3":
            hunt = 1
            herb = 1
            fight = 5
            talk = 1
            skill_unpicked=False
        elif player_type == "4":
            hunt = 1
            herb = 1
            fight = 1
            talk = 5
            skill_unpicked=False
        else:
            print("Sorry, that was not a valid response. Please type 1, 2, 3, or 4.")
            continue
    #create a csv file that will act as a save point using the player's name as a naming convention.
    #if there is already a file, load that instead.
    #Add the player's name and their starter stats, then first companion's name/stats
    with open(filename, 'w', newline='') as file:
        csv_writer=csv.writer(file)
        csv_writer.writerow(["Name", "Hunting", "Gathering", "Strength", "Charm", "Health", "Friendship"])
        csv_writer.writerow([player_name, hunt, herb, fight, talk, "5", "1"])
        csv_writer.writerow(["Birch", "4", "1", "3", "3", "5", "1"])

    #then make a dictionary for player and Birch, for easy access
    player_dict = {
        "Name": player_name,
        "Hunting": hunt,
        "Gathering": herb,
        "Strength": fight,
        "Charm": talk,
        "Health": 5
    }
    birch_dict = {
        "Name": "Birch",
        "Hunting": 3,
        "Gathering": 0,
        "Strength": 2,
        "Charm": 2,
        "Health": 5,
        "Friendship": 1
    }
    #gonna make dicts for the other cats too, for later use
    
    pixie_dict = {
        "Name": "Pixie",
        "Hunting": 7,
        "Gathering": 4,
        "Strength": 7,
        "Charm": 19,
        "Health": 15,
        "Friendship": 1
    }
    stellaluna_dict = {
        "Name": "Stella-Luna",
        "Hunting": 6,
        "Gathering": 7,
        "Strength": 27,
        "Charm": 7,
        "Health": 20,
        "Friendship": 1
    }
    elwood_dict = {
        "Name": "Elwood",
        "Hunting": 40,
        "Gathering": 40,
        "Strength": 40,
        "Charm": 40,
        "Health": 30,
        "Friendship": 1
    }
    inventory_dict = {
        "Herbs": 0,
        "Food": 0
    }

    companion_list = [birch_dict]

    return player_name, filename, player_dict, birch_dict, pixie_dict, stellaluna_dict, elwood_dict, companion_list, inventory_dict
       

def run_intro(companion_list, inventory_dict):
    #this runs the status report at the beginning of every day.
    print("It's a new day!")
    print("Status Report:")
    print ("-"*20)
    herb = inventory_dict.get("Herbs")
    food = inventory_dict.get("Food")
    print(f"You have {herb} herbs and {food} food.\n")
    for cat in companion_list:
        cat_name = cat.get("Name")
        cat_health = cat.get("Health")
        cat_hunt = cat.get("Hunting")
        cat_gather = cat.get("Gathering")
        cat_charm = cat.get("Charm")
        cat_strength = cat.get("Strength")
        if cat.get("Health") <=0:
            print(f"{cat_name} is injured!\n")
        else:
            print(f"{cat_name} is ready to go!\n")
        print(f"Health: {cat_health}")
        print(f"Hunting: {cat_hunt}")
        print(f"Gathering: {cat_gather}")
        print(f"Charm: {cat_charm}")
        print(f"Strength: {cat_strength}\n")
    print ("-"*20)

def run_camp(companion_list, inventory_dict, player_dict):
    #this covers the player input. It should ask them if they want to send someone exploring, cast a spell, or talk to their companions.
    #also mb I should add a debug function for easy testing?
    
    has_explored = False
    has_cast_spell = False
    has_talked = False
    while True:
        print("Do you want to:")
        print("1. Explore   2. Cast a spell   3. Talk to someone   4. End the day\n")
        choice = input("Type the number of your choice:\n")
        print ("-"*20)
        if choice == '1':
            if has_explored == True:
                print("You've already sent someone out to explore today!\n")
            else:
                has_explored = send_exploring(companion_list, inventory_dict)
        elif choice == '2':
            if has_cast_spell == True:
                print("You can't cast two spells on the same day.\n")
            else:
                has_cast_spell = cast_spell(companion_list, inventory_dict)
        elif choice == '3':
            if has_talked == True:
                print("Your coven is busy...\n")
            else:
                has_talked = talk_to_companions(companion_list, player_dict)
                
        elif choice == '4':
            #mb put the random event here?
            #Food minus one.
            print ("-"*20)
            print("Later that day...\n")
            inventory_dict["Food"] = (inventory_dict.get("Food") - len(companion_list))
            pick_random_event(companion_list, inventory_dict, player_dict)
            print ("-"*20)
            run_intro(companion_list, inventory_dict)
            run_camp(companion_list, inventory_dict, player_dict)
        elif choice == 'debug':
            open_debug_menu(companion_list, inventory_dict, player_dict)

def send_exploring(companion_list, inventory_dict):
    exploring_list = []
    exploring = True
    while exploring == True:
        print("Who do you want to send out? The available cats are:\n")
        print ("-"*20)
        for cat in companion_list:
            cat_name = cat.get("Name")
            if cat.get("Health") > 0:
                print (f"{cat_name}\n")
                exploring_list.append(cat_name)
            else:
                pass
        print ("-"*20)
        explore_companion = input("Type the name of the cat you want to send, or type r to return. ")
        if explore_companion in exploring_list:
            food_gained, herb_gained = calculate_explore(explore_companion, companion_list)
            print(f"{explore_companion} obtained {food_gained} food and {herb_gained} herbs!\n")
            inventory_dict["Food"] = (inventory_dict.get("Food") + food_gained)
            inventory_dict["Herbs"] = (inventory_dict.get("Herbs") + herb_gained)
            exploring = False
            return True
        elif explore_companion == "r":
            exploring = False
            return False
        else:
            print()

def calculate_explore(explore_companion, companion_list):
    if explore_companion.capitalize == 'Birch':
        explore_dict = companion_list[0]
    elif explore_companion.capitalize == 'Marlowe':
        explore_dict = companion_list[1]
    companion_hunt = explore_dict.get("Hunting")
    companion_gather = explore_dict.get("Gathering")
    explore_dict["Health"] = (explore_dict.get("Health") - 1)

    hunt_rng = random.randrange(0, 31)
    hunt_num = min(hunt_rng+companion_hunt, 60)
    if 0 <= hunt_num <= 10:
        food_caught = 1
    elif 11<= hunt_num <= 20:
        food_caught = 2
    elif 21<= hunt_num <= 30:
        food_caught = 4
    elif 31<= hunt_num <= 40:
        food_caught = 6
    elif 41<= hunt_num <= 50:
        food_caught = 9
    elif 51<= hunt_num <= 60:
        food_caught = 12

    herb_rng = random.randrange(0, 31)
    herb_num = min(herb_rng+companion_gather, 60)
    if 0 <= herb_num <= 10:
        herb_gathered = 1
    elif 11<= herb_num <= 20:
        herb_gathered = 2
    elif 21<= herb_num <= 30:
        herb_gathered = 4
    elif 31<= herb_num <= 40:
        herb_gathered = 6
    elif 41<= herb_num <= 50:
        herb_gathered = 9
    elif 51<= herb_num <= 60:
        herb_gathered = 12
    
    return food_caught, herb_gathered

def cast_spell(companion_list, inventory_dict):
    herb_num = inventory_dict.get("Herbs")
    casting = True
    while casting == True:
        print("What sort of spell would you like to cast today? 1. Health | 2. Hunting | 3. Gathering | 4. Charm | 5. Strength \n")
        spell_type = input(f"Please type the number of your choice, or r to return. | You have {herb_num} herbs.\n")
        if spell_type == "r":
            casting == False
            return False
        if spell_type == '1':
            print ("-"*20)
            print("Healing spells recover your companions' hit points!\n")
            print("Which healing spell would you like to cast?\n")
            print("1. Basic healing spell | Cost: 3 Herbs\n")
            print("2. Intermediate healing spell | Cost: 5 Herbs\n")
            print("3. Advanced healing spell | Cost: 10 Herbs\n")
            print ("-"*20)
            healing_type = input("Please type the number of your choice, or r to return.\n")
            if healing_type == 'r':
                pass
            elif healing_type == '1':
                if inventory_dict.get("Herbs") < 3:
                    print("You don't have enough herbs to cast that spell!\n")
                else:
                    spell_target, target_dict = pick_spell_target(companion_list)
                    target_dict["Health"] = (target_dict.get("Health") + 2)
                    print(f"{spell_target} has gained 2 health!\n")
                    inventory_dict["Herbs"] -= 3
                    return True
            elif healing_type == '2':
                if inventory_dict.get("Herbs") < 5:
                    print("You don't have enough herbs to cast that spell!\n")
                else:
                    spell_target, target_dict = pick_spell_target(companion_list)
                    target_dict["Health"] = (target_dict.get("Health") + 4)
                    print(f"{spell_target} has gained 4 health!\n")
                    inventory_dict["Herbs"] -= 5
                    return True
            elif healing_type == '3':
                if inventory_dict.get("Herbs") < 10:
                    print("You don't have enough herbs to cast that spell!\n")
                else:
                    spell_target, target_dict = pick_spell_target(companion_list)
                    target_dict["Health"] = (target_dict.get("Health") + 8)
                    print(f"{spell_target} has gained 8 health!\n")
                    inventory_dict["Herbs"] -= 10
                    return True
        elif spell_type == '2':
            print ("-"*20)
            print("Hunting spells enhance your companions' abilities so they can catch more prey!")
            print("Which hunting spell would you like to cast?\n")
            print("1. Swift Paws | Cost: 5 Herbs\n")
            print("2. Bird's Eye View | Cost: 8 Herbs\n")
            print("3. Cloak of Shadows | Cost: 12 Herbs\n")
            print ("-"*20)
            hunting_type = input("Please type the number of your choice, or r to return.\n")
            if hunting_type == 'r':
                pass
            elif hunting_type == '1':
                if inventory_dict.get("Herbs") < 5:
                    print("You don't have enough herbs to cast that spell!\n")
                else:
                    spell_target, target_dict = pick_spell_target(companion_list)
                    target_dict["Hunting"] = (target_dict.get("Hunting") + 1)
                    print(f"{spell_target} has gained 1 Hunting skill!\n")
                    inventory_dict["Herbs"] -= 5
                    return True
            elif hunting_type == '2':
                if inventory_dict.get("Herbs") < 8:
                    print("You don't have enough herbs to cast that spell!\n")
                else:
                    spell_target, target_dict = pick_spell_target(companion_list)
                    target_dict["Hunting"] = (target_dict.get("Hunting") + 4)
                    print(f"{spell_target} has gained 4 Hunting skill!\n")
                    inventory_dict["Herbs"] -= 8
                    return True
            elif hunting_type == '3':
                if inventory_dict.get("Herbs") < 12:
                    print("You don't have enough herbs to cast that spell!\n")
                else:
                    spell_target, target_dict = pick_spell_target(companion_list)
                    target_dict["Hunting"] = (target_dict.get("Hunting") + 6)
                    print(f"{spell_target} has gained 6 Hunting skill!\n")
                    inventory_dict["Herbs"] -= 12
                    return True
        elif spell_type == '3':
            print ("-"*20)
            print("Gathering spells grant your companions better knoweldge of nature, so they naturally find more herbs.\n")
            print ("Which gathering spell would you like to cast?\n")
            print("1. Gatherer's Intuition | Cost: 7 Herbs\n")
            print("2. Nature Knack | Cost: 12 Herbs\n")
            print("3. Terra's Guidance | Cost: 15 Herbs\n")
            print ("-"*20)
            gathering_type = input("Please type the number of your choice, or r to return.\n")
            if gathering_type == 'r':
                pass
            elif gathering_type == '1':
                if inventory_dict.get("Herbs") < 7:
                    print("You don't have enough herbs to cast that spell!\n")
                else:
                    spell_target, target_dict = pick_spell_target(companion_list)
                    target_dict["Gathering"] = (target_dict.get("Gathering") + 1)
                    print(f"{spell_target} has gained 1 Gathering skill!\n")
                    inventory_dict["Herbs"] -= 7
                    return True
            elif gathering_type == '2':
                if inventory_dict.get("Herbs") < 12:
                    print("You don't have enough herbs to cast that spell!\n")
                else:
                    spell_target, target_dict = pick_spell_target(companion_list)
                    target_dict["Gathering"] = (target_dict.get("Gathering") + 4)
                    print(f"{spell_target} has gained 4 Gathering skill!\n")
                    inventory_dict["Herbs"] -= 12
                    return True
            elif gathering_type == '3':
                if inventory_dict.get("Herbs") < 15:
                    print("You don't have enough herbs to cast that spell!\n")
                else:
                    spell_target, target_dict = pick_spell_target(companion_list)
                    target_dict["Gathering"] = (target_dict.get("Gathering") + 6)
                    print(f"{spell_target} has gained 6 Gathering skill!\n")
                    inventory_dict["Herbs"] -= 15
                    return True
        elif spell_type == '4':
            print ("-"*20)
            print("Charm spells grant your companions the gift of gab, useful for making allies in the forest!\n")
            print("Which charm spell would you like to cast?\n")
            print("1. Shiny Fur | Cost: 10 Herbs\n")
            print("2. Silver Tongue | Cost: 14 Herbs\n")
            print("3. Aura of Benevolence | Cost: 18 Herbs\n")
            print ("-"*20)
            charm_type = input("Please type the number of your choice, or r to return.\n")
            if charm_type == 'r':
                pass
            elif charm_type == '1':
                if inventory_dict.get("Herbs") < 10:
                    print("You don't have enough herbs to cast that spell!\n")
                else:
                    spell_target, target_dict = pick_spell_target(companion_list)
                    target_dict["Charm"] = (target_dict.get("Charm") + 1)
                    print(f"{spell_target} has gained 1 Charm skill!\n")
                    inventory_dict["Herbs"] -= 10
                    return True
            elif charm_type == '2':
                if inventory_dict.get("Herbs") < 14:
                    print("You don't have enough herbs to cast that spell!\n")
                else:
                    spell_target, target_dict = pick_spell_target(companion_list)
                    target_dict["Charm"] = (target_dict.get("Charm") + 4)
                    print(f"{spell_target} has gained 4 Charm skill!\n")
                    inventory_dict["Herbs"] -= 14
                    return True
            elif charm_type == '3':
                if inventory_dict.get("Herbs") < 18:
                    print("You don't have enough herbs to cast that spell!\n")
                else:
                    spell_target, target_dict = pick_spell_target(companion_list)
                    target_dict["Charm"] = (target_dict.get("Charm") + 6)
                    print(f"{spell_target} has gained 6 Charm skill!\n")
                    inventory_dict["Herbs"] -= 18
                    return True
        elif spell_type == '5':
            print ("-"*20)
            print("Strength spells allow your companions to deepen their power so they can do more with their magic!\n")
            print("Which strength spell would you like to cast?\n")
            print("1. Inner Spark | Cost: 17 Herbs\n")
            print("2. Potent Flame | Cost: 21 Herbs\n")
            print("3. Inferno Soul | Cost: 25 Herbs\n")
            print ("-"*20)
            strength_type = input("Please type the number of your choice, or r to return.\n")
            if strength_type == 'r':
                pass
            elif strength_type == '1':
                if inventory_dict.get("Herbs") < 17:
                    print("You don't have enough herbs to cast that spell!\n")
                else:
                    spell_target, target_dict = pick_spell_target(companion_list)
                    target_dict["Strength"] = (target_dict.get("Strength") + 1)
                    print(f"{spell_target} has gained 1 Strength skill!\n")
                    inventory_dict["Herbs"] -= 17
                    return True
            elif strength_type == '2':
                if inventory_dict.get("Herbs") < 21:
                    print("You don't have enough herbs to cast that spell!\n")
                else:
                    spell_target, target_dict = pick_spell_target(companion_list)
                    target_dict["Strength"] = (target_dict.get("Strength") + 4)
                    print(f"{spell_target} has gained 4 Strength skill!\n")
                    inventory_dict["Herbs"] -= 21
                    return True
            elif strength_type == '3':
                if inventory_dict.get("Herbs") < 25:
                    print("You don't have enough herbs to cast that spell!\n")
                else:
                    spell_target, target_dict = pick_spell_target(companion_list)
                    target_dict["Strength"] = (target_dict.get("Strength") + 6)
                    print(f"{spell_target} has gained 6 Strength skill!\n")
                    inventory_dict["Herbs"] -= 25
                    return True
        else:
            print("Sorry, that is not a valid input.\n")
                    
def pick_spell_target(companion_list):
    casting_list = []
    while True:
        print("Who do you want to cast this spell on? Available recipients are:\n")
        for cat in companion_list:
            cat_name = cat.get("Name")
            cat_health = cat.get("Health")
            print (f"{cat_name} - Health: {cat_health}\n")
            casting_list.append(cat_name)
        spell_target = input("Please type the name of your choice. ")
        if spell_target in casting_list:
            if spell_target == 'Birch':
                target_dict = companion_list[0]
            elif spell_target == 'Marlowe':
                target_dict = companion_list[1]
            elif spell_target == 'Pixie':
                target_dict = companion_list[2]
            elif spell_target == 'Stellaluna':
                target_dict = companion_list[3]
            elif spell_target == 'Elwood':
                target_dict = companion_list[4]
            return spell_target, target_dict
        else:
            print("Sorry, that's not a valid input. Please type another answer.")

def talk_to_companions(companion_list, player_dict):
    talk_list = []
    while True:
        print("Which companion would you like to check in on? Current companions are:\n")
        print ("-"*20)
        for cat in companion_list:
            cat_name = cat.get("Name")
            talk_list.append(cat_name)
            print(f"{cat_name}\n")
        print ("-"*20)    
        companion = input("Type the name of the cat you want to speak to, or type r to return.\n")
        if companion.capitalize in talk_list:
            if companion.capitalize == 'Birch':
                talk_to_birch(companion_list)
                return True
            elif companion.capitalize == 'Marlowe':
                talk_to_marlowe(companion_list)
                return True
        elif companion.lower == "r":
            False
            return False
        else:
            print("Sorry, that is not a valid input. Please type a companion name or r.")

def talk_to_birch(companion_list, player_dict):
    #talking to companions randomly increases their skills, providing an incentive for paying attention to them.
    birch_dict = companion_list[0]
    friendship = birch_dict.get("Friendship")
    increase = min((friendship//4), 5)
    player_name = player_dict.get("Name")
    number = random.randrange(1,6)
    if friendship == 1 or 2:
        if number == 1:
            print(f"Birch: 'Oh, hi {player_name}. What do you need?'\n")
            birch_dict["Health"] += increase
            input("Press Enter to continue.\n")
        elif number == 2:
            print("Birch: 'Smells like rain today. Make sure to stay dry.'\n")
            birch_dict["Hunting"] += increase
            input("Press Enter to continue.\n")
        elif number == 3:
            print("Birch: 'It's interesting to be in a coven for the first time. Hope we all work well together.'\n")
            birch_dict["Gathering"] += increase
            input("Press Enter to continue.\n")
        elif number == 4:
            print("Birch: 'I may be just a amateur witch, but I'll do my best to support you.'\n")
            birch_dict["Charm"] += increase
            input("Press Enter to continue.\n")
        elif number == 5:
            print("Birch: 'Good luck hunting today. I smelled a lot of prey out there earlier.'\n")
            birch_dict["Strength"] += increase
            input("Press Enter to continue.\n")
    elif friendship == 3 or 4:
        if number == 1:
            print(f"Birch: '{player_name}! How are you?'\n")
            birch_dict["Health"] += increase
            input("Press Enter to continue.\n")
        elif number == 2:
            print("Birch: 'Do you want to go out hunting later? I bet we'll catch more if we work together.'\n")
            birch_dict["Hunting"] += increase
            input("Press Enter to continue.\n")
        elif number == 3:
            print("Birch: 'How are the spells going? Sorry, I know I'm not too helpful with those.'\n")
            birch_dict["Gathering"] += increase
            input("Press Enter to continue.\n")
        elif number == 4:
            print("Birch: 'Have you ever seen those housecats wandering around the forest edge? Don't know how they live like that, " \
            "stuck in a big box half the time.'\n")
            birch_dict["Charm"] += increase
            input("Press Enter to continue.\n")
        elif number == 5:
            print(f"Birch: '{player_name}! I caught a big rabbit. Want to share it?'\n")
            birch_dict["Strength"] += increase
            input("Press Enter to continue.\n")
    elif friendship == 5 or 6:
        if number == 1:
            print(f"Birch: 'Oh, {player_name}. It's good to see you.'\n")
            birch_dict["Health"] += increase
            input("Press Enter to continue.\n")
        elif number == 2:
            print(f"Birch: '{player_name}, here, I got the herbs you needed... Huh? These are the wrong ones? Darnit.'\n")
            birch_dict["Hunting"] += increase
            input("Press Enter to continue.\n")
        elif number == 3:
            print("Birch: 'I really love the sense of community here. You've built a good coven.'\n")
            birch_dict["Gathering"] += increase
            input("Press Enter to continue.\n")
        elif number == 4:
            print(f"Birch: '{player_name}, would you come exploring with me later? Feels like it's been a while " 
                  "since we've had a good chat.'\n")
            birch_dict["Charm"] += increase
            input("Press Enter to continue.\n")
        elif number == 5:
            print("Birch: 'What's with the weather these days? Feels like it changes in a blink.'\n")
            birch_dict["Strength"] += increase
            input("Press Enter to continue.\n")
    elif friendship == 7 or 8:
        if number == 1:
            print(f"Birch: '{player_name}! Good to see you around. How have you been?.'\n")
            birch_dict["Health"] += increase
            input("Press Enter to continue.\n")
        elif number == 2:
            print(f"Birch: 'Hey, {player_name}? Thank you for being so patient with me. I don't have much of an aptitude for magic, "
                  "but this coven is definitely where I belong.'\n")
            birch_dict["Hunting"] += increase
            input("Press Enter to continue.\n")
        elif number == 3:
            print("Birch: 'Another great day. What do you want to do?'\n")
            birch_dict["Gathering"] += increase
            input("Press Enter to continue.\n")
        elif number == 4:
            print(f"Birch: 'Hey, there goes our brave leader. What are you up to, {player_name}?'\n")
            birch_dict["Charm"] += increase
            input("Press Enter to continue.\n")
        elif number == 5:
            print(f"Birch: 'Hey {player_name}, I know you're busy. Can I help take anything off your plate?'\n")
            birch_dict["Strength"] += increase
            input("Press Enter to continue.\n")
    elif friendship >= 9:
        if number == 1:
            print("Birch: 'How lucky is it that we bumped into each other when we did? I used to be a solo cat, but I can't "
                  "imagine life without you and the coven.'\n")
            birch_dict["Health"] += increase
            input("Press Enter to continue.\n")
        elif number == 2:
            print(f"Birch: '{player_name}! My first friend in the forest. How are you?'\n")
            birch_dict["Hunting"] += increase
            input("Press Enter to continue.\n")
        elif number == 3:
            print("Birch: 'What do 'I' feel like doing today? Hm... Maybe hunting with my best friend? What do you say?'\n")
            birch_dict["Gathering"] += increase
            input("Press Enter to continue.\n")
        elif number == 4:
            print(f"Birch: '{player_name}, do you need me for anything? I'll do whatever I can to help out.'\n")
            birch_dict["Charm"] += increase
            input("Press Enter to continue.\n")
        elif number == 5:
            print(f"Birch: '{player_name}! I found this herb! It's useful, right...? Yeah! Got the right one!'\n")
            birch_dict["Strength"] += increase
            input("Press Enter to continue.\n")
    birch_dict["Friendship"] += 1

def talk_to_marlowe(companion_list, player_dict):
    marlowe_dict = companion_list[1]
    friendship = marlowe_dict.get("Friendship")
    increase = min((friendship//4), 5)
    player_name = player_dict.get("Name")
    number = random.randrange(1,6)
    if friendship == 1 or 2:
        if number == 1:
            print(f"Marlowe: 'O-oh, hello {player_name}. Did you need anything?'\n")
            marlowe_dict["Health"] += increase
            input("Press Enter to continue.\n")
        elif number == 2:
            print("Marlowe: 'S-STOP! ...Um, you were about to step on that herb there... Oh, I shouldn't have yelled... S-sorry...'\n")
            marlowe_dict["Hunting"] += increase
            input("Press Enter to continue.\n")
        elif number == 3:
            print("Marlowe: 'Um, if you ever need something from my garden, just let me know... I have lots of plants.'\n")
            marlowe_dict["Gathering"] += increase
            input("Press Enter to continue.\n")
        elif number == 4:
            print("Marlowe: 'The soil in this area of the forest is very healthy, you know? L-lots of different plants grow around here.'\n")
            marlowe_dict["Charm"] += increase
            input("Press Enter to continue.\n")
        elif number == 5:
            print("Marlowe: 'I-it's a little nerve-wracking being around all these other cats... But I'll try my best...'\n")
            marlowe_dict["Strength"] += increase
            input("Press Enter to continue.\n")
    elif friendship == 3 or 4:
        if number == 1:
            print("'I-I hope you don't mind that I still spend a lot of time at my old home... My garden is over there, "
                  "so I go back to tend to it.'\n")
            marlowe_dict["Health"] += increase
            input("Press Enter to continue.\n")
        elif number == 2:
            print("Marlowe: 'I like the forest. It's very peaceful. Do you go for walks there often?'\n")
            marlowe_dict["Hunting"] += increase
            input("Press Enter to continue.\n")
        elif number == 3:
            print("Marlowe: 'Plants are so interesting. They have their own sort of language, i-if you pay attention.'\n")
            marlowe_dict["Gathering"] += increase
            input("Press Enter to continue.\n")
        elif number == 4:
            print("Marlowe: 'W-would these herbs be useful to the coven? I grew them myself.'\n")
            marlowe_dict["Charm"] += increase
            input("Press Enter to continue.\n")
        elif number == 5:
            print("Marlowe: 'H-huh?! O-oh, you just caught me daydreaming. Sorry, I'll pay more attention...'\n")
            marlowe_dict["Strength"] += increase
            input("Press Enter to continue.\n")
    elif friendship == 5 or 6:
        if number == 1:
            print("Marlowe: 'Hehe... My garden looks healthy today. Would you like to come see?'\n")
            marlowe_dict["Health"] += increase
            input("Press Enter to continue.\n")
        elif number == 2:
            print("Marlowe: 'B-Birch is really nice. The other day I caught a rabbit nibbling on my plants, and Birch said "
                  "they'd go searching to see if they could find its burrow and chase it off.'\n")
            marlowe_dict["Hunting"] += increase
            input("Press Enter to continue.\n")
        elif number == 3:
            print("Marlowe: 'I thought I was experienced in using herbs for spellcasting, b-but seeing what a coven working together can "
                  "do... I've only scratched the surface.'\n")
            marlowe_dict["Gathering"] += increase
            input("Press Enter to continue.\n")
        elif number == 4:
            print("Marlowe: 'A-are there any plants you've been having trouble finding? B-bring me a sample, and I can try to cultivate it...'\n")
            marlowe_dict["Charm"] += increase
            input("Press Enter to continue.\n")
        elif number == 5:
            print("Marlowe: 'S-sometimes I get stressed in crowds, but the coven has such a peaceful atmosphere...'\n")
            marlowe_dict["Strength"] += increase
            input("Press Enter to continue.\n")
    elif friendship == 7 or 8:
        if number == 1:
            print("Marlowe: 'My favorite plant? ...I know you'd expect me to say ferns, but it's actually sunflowers. Th-they're " \
            "so pretty, and they even give back to other plants by enriching the soil...'\n")
            marlowe_dict["Health"] += increase
            input("Press Enter to continue.\n")
        elif number == 2:
            print(f"Marlowe: '{player_name}! I have an empty plot in my garden. I-if you'd like, I can teach you how to plant something...'\n")
            marlowe_dict["Hunting"] += increase
            input("Press Enter to continue.\n")
        elif number == 3:
            print(f"Marlowe: 'U-um, {player_name}? Is there anything I can help with?'\n")
            marlowe_dict["Gathering"] += increase
            input("Press Enter to continue.\n")
        elif number == 4:
            print("Marlowe: 'Thinking back on that day we met... G-goodness, I was so panicked I could barely think. I-it's a bit " \
            "of a miracle that you understood me...'\n")
            marlowe_dict["Charm"] += increase
            input("Press Enter to continue.\n")
        elif number == 5:
            print("Marlowe: 'Another beautiful day in the forest. W-would you like to take a walk in my garden together?'\n")
            marlowe_dict["Strength"] += increase
            input("Press Enter to continue.\n")
    elif friendship >= 9:
        if number == 1:
            print("Marlowe: 'Here, th-this is for you... Uh, n-no, it doesn't have any magic properties. It's just a zinnia. D-do " \
            "you know flower language, by any chance?'\n")
            marlowe_dict["Health"] += increase
            input("Press Enter to continue.\n")
        elif number == 2:
            print(f"Marlowe: 'I'm so glad you asked me to join your coven. ...Why am I saying that now? O-oh, just feeling sentimental...'\n")
            marlowe_dict["Hunting"] += increase
            input("Press Enter to continue.\n")
        elif number == 3:
            print(f"Marlowe: '{player_name}! Oh, I just wanted to let you know... Those herbs that you helped me plant are doing great! "
                  "We can probably harvest them soon.'\n")
            marlowe_dict["Gathering"] += increase
            input("Press Enter to continue.\n")
        elif number == 4:
            print("Marlowe: 'To me, a dear friend is someone you can be comfortable in silence with... Like you, for example.'\n")
            marlowe_dict["Charm"] += increase
            input("Press Enter to continue.\n")
        elif number == 5:
            print(f"Marlowe: 'Oh, {player_name}! I'm practicing my magic. I want to get stronger so I can support everyone better.'\n")
            marlowe_dict["Strength"] += increase
            input("Press Enter to continue.\n")

def pick_random_event(companion_list, inventory_dict, player_dict):
    #range max = 1+ the number of items on companion list times ten.
    #how to divide each 10 events added for each companion?
    #1-4 are random food, herb, or health hits/gain with no input.
    #5-7 are companion chat events. 2 dialogue options with minor effects.
    #all of the above are pretty simple, so they can be 'in house' without their own functions.
    #8-9 are skill check events with rewards/punishments for pass/failure.
    #10 is the recruitment event, which has a skill check (or multiple).
    player_name = player_dict.get("Name")
    birch_dict = companion_list[0]
    range_max = 1 + (len(companion_list)*10)
    pick_number = random.randrange(0, range_max)
    if pick_number == 1:
        print("Your coven was very active today... and very hungry! Your food storage is looking a bit lean...\n")
        inventory_dict["Food"] = (inventory_dict.get("Food") - len(companion_list))
        input("Press Enter to continue.\n")
    elif pick_number == 2:
        print("Prey was abundant today! You gained some extra food for your stockpile.\n")
        inventory_dict["Food"] = (inventory_dict.get("Food") + (len(companion_list)*2))
        input("Press Enter to continue.\n")
    elif pick_number == 3:
        print("You found some pesky bugs munching on your collected herbs! Unfortunately, you lost a few...\n")
        inventory_dict["Herbs"] = (inventory_dict.get("Herbs") - 2)
        input("Press Enter to continue.\n")
    elif pick_number == 4:
        print("You found a patch of herbs sprouting near your camp! You picked a few and dried them.\n")
        inventory_dict["Herbs"] = (inventory_dict.get("Herbs") + 4)
        input("Press Enter to continue.\n")
    elif pick_number == 5:
        print("You find Birch bringing back a freshly-caught mouse. They nod in greeting.\n")
        print(f"Birch: 'Hi, {player_name}! There's been good hunting today. Trying to make the most of it.'\n")
        print("They drop the mouse on the food pile. As they move past you, you notice some new scratches on their flank.")
        input("Press Enter to continue.\n")
        while True:
            print("Birch has definitely been working hard! Should you (1.) suggest they take a break or (2.) offer to join them hunting?")
            choice_rndm5 = input("Please type the number of your choice.")
            if choice_rndm5 == '1':
                print("Birch's ears perk up in surprise.\n")
                print("Birch: 'Oh, the scratches? Don't worry, they're not very deep. Had a brush with a thornbush, that's all.\n")
                print("You gently insist they should apply some medicine to the wound. Even shallow scratches can still get infected!\n")
                print("Birch tilts their head. They blink slowly, and you hear a rare purr of amusement.\n")
                print("Birch: '...You're right. I'm being stubborn.'\n")
                print("Birch: 'Lucky that I have such a smart coven leader. Thanks for looking out for me.'\n")
                print("You chat with Birch as they patch themself up. Birch has gained 2 Health!")
                birch_dict["Health"] = (birch_dict.get("Health") + 2)
                input("Press Enter to continue.\n")
                False
            elif choice_rndm5 == '2':
                print("Birch stands up a bit taller, and you see a sparkle in their eyes. You know they love hunting.\n")
                print("Birch: 'Really? That's a great idea! If we go now, we can make another sweep of the forest before the sun sets!\n")
                print("You and Birch have a great time hunting. You gain 4 Food!")
                inventory_dict["Food"] = (inventory_dict.get("Food") + 4)
                input("Press Enter to continue.\n")
                False
    elif pick_number == 6:
        print("You walk outside your den to find Birch waiting for you. They seem troubled by something.\n")
        print(f"Birch: '{player_name}... I've been thinking. The purpose of a coven is for witch-cats to support each other by pooling their magic, right?'\n")
        print("Birch: 'But I'm, uh, not exactly the strongest witch. Survival and exploration are fine,"
               "but it's hard for me to grasp the metaphysical stuff.'\n")
        print("Birch: 'What should I do? I don't want to hold the coven back.'\n")
        print("They look sheepishly at the ground, awaiting your answer.")
        input("Press Enter to continue.\n")
        while True:
            print("Should you (1.) tell them they're fine the way they are, or (2.) offer to help them practice their magic?")
            choice_rndm6 = input("Please type the number of your choice.")
            if choice_rndm6 == '1':
                print("You tell Birch that a coven is about more than just magic. It's a community that needs all sorts of skillsets to thrive! "
                      "They're doing their part just fine.\n")
                print("Birch seems relieved.\n")
                print("Birch: 'Huh. I didn't think about it that way, but I guess that makes sense. Thanks for hearing me out.'\n")
                print("Over the next few days, Birch throws themself into supporting the coven with all they have. "
                    "They've been bringing in more prey than ever!\n")
                print("Birch has gained 2 Hunting.")
                birch_dict["Hunting"] = (birch_dict.get("Hunting") + 2)
                input("Press Enter to continue.\n")
                False
            elif choice_rndm6 == '2':
                print("You offer to explain what you know to Birch and try and help them understand.\n")
                print("Birch looks unsure, but then nods, a determined look about them.\n")
                print("Birch: 'Okay. I'll do the best that I can! Can we start now?'\n")
                print("You know Birch struggles with the complexity of spellcasting, so you start with the basics: "
                      "medicinal herbs and their medical properties. Birch sees lots of these plants while exploring the forest, "
                      "so this should be an easy starting point for them.\n")
                print("As expected, Birch follows your lessons with utmost focus. The next day, they come back from their morning patrol "
                      "with a wad of strong-smelling leaves in their mouth.\n")
                print("Birch: 'These are it, right? The mint you needed for that one spell?'\n")
                print("Birch has gained 2 Gathering.")
                birch_dict["Gathering"] = (birch_dict.get("Gathering") + 2)
                input("Press Enter to continue.\n")
                False
    elif pick_number == 7:
         fox_fight(birch_dict, player_dict, player_name)
    elif pick_number == 8:
        print("It's been rather rainy the last few days, and the ground is wet and squishy. One morning, you step out of your den to find " \
        "the ground covered in mushrooms of all shapes and sizes! Birch looks a little grossed out.\n")
        print(f"Birch: 'Ugh, they're everywhere... Careful, {player_name}. Some send out spores if you bump them.'\n")
        print("They carefully hop over a patch of brown mushrooms with button-like tops, treating them as if they were anthills.\n")
        print("Birch: 'What should we do with them? I know some of them are used for spells, but... can " \
        "we really tell them apart?'")
        input("Press Enter to continue.\n")
        while True:
            print("Indeed, some mushrooms are safe, edible, and even have magic properties. But other types can be hallucinogenic " \
            "at best, dangerous at worst. Should you (1.) get rid of all the mushrooms or (2.) try to separate the good and bad ones?\n")
            choice_rndm8 = input("Please type the number of your choice.\n")
            if choice_rndm8 == '1':
                print("You spend the day clearing out the mushrooms. Camp looks a lot cleaner now!\n")
            elif choice_rndm8 == '2':
                if player_dict.get("Gathering") + birch_dict.get("Gathering") >= 5:
                    print("You spot a couple of edible mushrooms among the group. No need to waste those! " \
                    "Using your knowledge of Gathering, you guide Birch on which ones to pick and which to avoid.\n")
                    print("You have gained 3 Herbs and 3 Food!\n")
                    inventory_dict["Food"] += 3
                    inventory_dict["Herbs"] += 3
                    input("Press Enter to continue.\n")
                    False
                else:
                    print("You don't want to waste the mushrooms, but you and Birch struggle to identify which " \
                    "ones are which. At one point Birch bites down on a mushroom head only to begin choking on a " \
                    "burst of spores. You end up getting rid of all the mushrooms, just to be safe.\n")
                    print("Birch has lost 1 Health.\n")
                    birch_dict["Health"] -= 1
                    input("Press Enter to continue.\n")
                    False
    elif pick_number == 9:
        print("A strange cat wanders into your camp, muttering to themself. They reek of asphalt and kibble - a housecat, " \
        "maybe? But what are they doing all the way out here?\n")
        print("Stranger: 'I'm not lost... I'm not lost, haha. I'll find home any minute now...'\n")
        print("Their coat is dirty and they look skinny. They must have been out here for a while. You and Birch " \
        "look at each other and approach them slowly, calling out a greeting. The cat's tail puffs to twice its size.\n")
        print("Stranger: 'Who... who are you?! Aaaaaaaah, don't eat me! Scary wild cats! Don't eat me! Don't eat me!'\n")
        print("They begin running around in circles, wailing to themself.")
        input("Press Enter to continue.\n")
        while True:
            print("They're clearly scared of you. Should you (1.) try to calm them down, or (2.) just leave them be?\n")
            choice_rndm9 = input("Please type the number of your choice.\n")
            if choice_rndm9 == '1':
                if player_dict.get("Charm") + birch_dict.get("Charm") >= 5:
                    print("With some gentle coaxing, you and Birch talk down the frightened cat and bring them some food. " \
                    "As you suspect, they're a lost housecat who went into the forest on a whim and hasn't been able to " \
                    "find their way back out. They seem both embarrassed and grateful for your patience.\n")
                    print("Once they've recovered, you show them the way out of the forest. Birch seems pleased.\n")
                    print("Birch: 'It feels good to be able to do something nice for another cat. Supporting others... " \
                    "that's what covens are for, right?'\n")
                    print("You have gained 1 Friendship with Birch!")
                    birch_dict["Friendship"] += 1
                    input("Press Enter to continue.\n")
                    False
                else:
                    print("Despite your best attempts, the lost cat only gets more and more upset. Suddenly, they lash out at you! " \
                    "Birch pushes you away at the last second.\n")
                    print("Birch has lost 2 Health.")
                    birch_dict["Health"] -= 2
                    input("Press Enter to continue.\n")
                    False
    elif pick_number == 10:
        if len(companion_list) != 1:
            print("It was an uneventful day.\n")
            input("Press Enter to continue.\n")
        else:
            recruit_marlowe(companion_list, inventory_dict, player_dict)
    else:
        print("It was an uneventful day.\n")
        input("Press Enter to continue.\n")

def fox_fight(birch_dict, player_dict, player_name):
    print("You're wandering the edge of the forest one day, tracking a juicy bird that you smelled... "
              "when you hear the sounds of a fight!\n")
    print("Racing towards the source, you see Birch squaring off against a snarling fox. Several pieces of prey lie on the ground between them.\n")
    print("Birch: 'Back off, fox-face! This is MY catch.'\n")
    print("They spot you out of the corner of their eye.\n")
    print(f"Birch: '{player_name}! Help me fight this thing off!'\n")
    while True:
        print("It's two versus one, but foxes are vicious foes. Do you (1.) fight it or (2.) retreat?")
        choice_rndm7 = input("Please type the number of your choice.")
        if choice_rndm7 == '1':
            print("Flank-to-flank with Birch, you prepare to face the fox!\n")
            combined_fight = birch_dict.get("Strength") + player_dict.get("Strength")
            if combined_fight >= 5:
                print("Luckily, you both are in top shape. You send that fox running for the hills!\n")
            else:
                print("The battle is tough, but eventually the fox retreats. You and Birch take a moment to rest.\n")
                print("Birch has lost 2 Health.\n")
                birch_dict["Health"] = (birch_dict.get("Health") - 2)
            print("You recovered the prey, gaining 2 Food!")
            False
        elif choice_rndm7 == '2':
            print("You call for Birch to retreat. They hesitate, looking longingly at the prey pile, but follow your lead.\n")
            print("Foxes can easily injure a cat. You shouldn't fight them unless you're confident in your Strength.\n")
            input("Press Enter to continue.\n")
            False
            
def recruit_marlowe(companion_list, inventory_dict, player_dict):
    player_name = player_dict.get("Name")
    birch_dict = companion_list[0]
    
    print("The wind whips around you as you bound through the trees, cringing at the eerie howl in the sky above." \
    "Maybe you shouldn't have chosen to head out earlier. But the scent of the storm was much fainter then, and you had thought you " \
    "could beat it. It seems you were wrong.\n")
    print("Birch runs alongside you. With a flick of their striped tail, they direct you towards a gap in the trees.\n")
    print("Birch: 'Over here! The underbrush is thinner. We'll be back sooner if we take this shortcut!'\n")
    print("You follow them through a dry and downtrodden path. You're making good time - until you hear a loud groan that sets your fur on end. " \
    "Birch notices it too, and skids to a stop.\n")
    print("Birch: 'Stop! It's not safe-'\n")
    print("They barely finish their sentence before an old tree crashes down on the path with a horrible splintering sound. " \
    "Among the chaos, you hear a feline wail. You rush forward to see if Birch is alright, and they almost crash into you.\n")
    print("Birch: 'That... wasn't you, was it? It wasn't me either. Is there someone else here? We have to help them!'\n")
    input("Press Enter to continue.\n")
    print("You and Birch approach the tree and find a tiny cat with brown, mousy fur. They're crouched on the ground near the tree, " \
    "their ears back and eyes wide. Looks like it missed them by a whisker.\n")
    print("Birch is immediately at the stranger's side, nudging them up.\n")
    print("Birch: 'Are you hurt? Our camp is just a little while south of here! Come with us, and you'll be safe there!'\n")
    print("The stranger mutters to themself, still bug-eyed.\n")
    print("Stranger: 'No, no, near here, there's...'\n")
    print("They jump up like they've been struck by lightning.\n")
    print("Stranger: 'The ostrich fern! Follow the ostrich fern!'\n")
    print("They bolt into the woods, quick as a flash.\n")
    input("Press Enter to continue.\n")
    #providing a break for the player to read all that text ^
    print("Birch: 'The ostrich fern...?'\n")
    if player_dict.get("Gathering") + birch_dict.get("Gathering") >= 12:
        print("Birch wrinkles their nose in concentration.\n")
        print("Birch: 'That sounds familliar. I think you mentioned them once? Their fronds are sort of fluffy, like feathers...'\n")
        print("You look in the direction the strange cat ran off in and notice a vibrant green fern with a grooved stem." \
        "The ostrich fern! There are more clumps of them in the distance. With your path home cut off and danger imminent," \
        "you decide to take a chance on the stranger's advice. You and Birch follow the ferns, and eventually come to an enormous" \
        "bush of them around a small hill. There's a tunnel leading inside the hill, so you and Birch crawl in.\n")
        print("It's dark inside, but thankfully quiet compared to the roaring outdoors. The tunnel slowly widens out into a " \
        "small living space. You spot the nervous cat from earlier.\n")
        print("Stranger: 'You- oh, th-thank goodness. You found it. Are either of you hurt?'\n")
        print("Birch: 'I think we're both fine. Thank you for leading us here. Is this your home?'\n")
        print("The stranger nods.\n")
        print("Stranger: 'I-It is. I leave the ferns as a reminder for myself... And they're a sign of good soil, so I figure they're" \
        "good luck anyway... Oh, where are my manners? M-my name is Marlowe.'\n")
        print("You all make your introductions, and to your surprise, you learn Marlowe is a witch cat too! They have a deep interest" \
        "in herbs, and grow their own garden on the other side of the hill. You ask if they'd be interested in joining" \
        "your coven. Marlowe seems delighted, in their own shy way.\n")
        print("Marlowe: 'A-are you sure? Oh, I'd love to!'\n")
        marlowe_dict = {
        "Name": "Marlowe",
        "Hunting": 6,
        "Gathering": 11,
        "Strength": 6,
        "Charm": 2,
        "Health": 10,
        "Friendship": 1
        }
        companion_list.append(marlowe_dict)
        print("Marlowe has been recruited!\n")
        input("Press Enter to continue.\n")
        return companion_list
    else:
        print("Birch shakes their head.\n")
        print("Birch: 'Do you know what they were talking about? I don't.\n'")
        print("You vaguely remember having heard of an ostrich fern, but can't identify it. The storm is worsening by the second." \
        "You need to get back.\n")
        print("Birch: 'I hope that other cat is okay, but we need to go.'\n")
        print("You both safely find your way back to camp and wait out the storm. Who was that other cat, and what " \
        "did they mean by 'the ostrich fern'? Maybe if you learn more about Gathering, you can figure it out...")
        input("Press Enter to continue.\n")
    

def open_debug_menu(companion_list, inventory_dict, player_dict):
    debug = True
    while debug == True:
        debug_command = input("Please input your command or r to return. ")
        if debug_command == "food":
            inventory_dict["Food"] = 100
        elif debug_command == "herb":
            inventory_dict["Herbs"] = 100
        elif debug_command == "marlowe":
            recruit_marlowe(companion_list, inventory_dict, player_dict)
        elif debug_command == 'r':
            debug = False
            return
            

        

if __name__ == "__main__":
    main()